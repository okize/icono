// Generated by CoffeeScript 1.6.3
var Q, SVGO, fs, inDir, log, mime, outDir, path, pathExists, readDir, svg2png, svgo, _;

fs = require('fs');

path = require('path');

_ = require('underscore');

Q = require('q');

SVGO = require('svgo');

svgo = new SVGO();

svg2png = require('svg2png');

mime = require('mime');

log = require(path.resolve(__dirname, './', 'log'));

inDir = path.resolve(__dirname, '..', 'test', 'inDir');

outDir = path.resolve(__dirname, '..', 'test', 'outDir');

readDir = Q.denodeify(fs.readdir);

pathExists = Q.denodeify(fs.exists);

module.exports = function(args) {
  return pathExists(inDir, function(exists) {
    if (exists) {
      return readDir(inDir).then(function(files) {
        var filtered;
        return filtered = _.filter(files, function(file) {
          return fs.statSync(path.join(inDir + '/' + file)).isFile() === true && mime.lookup(file) === 'image/svg+xml';
        });
      }).then(function(filtered) {
        return console.log(filtered);
      });
    } else {
      return log.msg('error', 'wrongDirectory');
    }
  });
};
